<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .task-card {
            transition: all 0.3s ease;
        }
        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .completed-task {
            opacity: 0.7;
            background-color: #f0fdf4;
        }
        .completed-task .task-title {
            text-decoration: line-through;
            color: #4ade80;
        }
        .fade-in {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="cont2ainer mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-bold text-indigo-600 mb-2">Task Manager</h1>
            <p class="text-gray-600">Organize your work and boost your productivity</p>
        </header>

        <!-- Add Task Form -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Add New Task</h2>
            <form id="taskForm" class="space-y-4">
                <div>
                    <label for="taskTitle" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                    <input type="text" id="taskTitle" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="taskDescription" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea id="taskDescription" rows="3"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="taskCompleted" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                    <label for="taskCompleted" class="ml-2 block text-sm text-gray-700">Completed</label>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" id="cancelEdit" class="hidden px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">
                        Cancel
                    </button>
                    <button type="submit" id="submitBtn" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors">
                        Add Task
                    </button>
                </div>
            </form>
        </div>

        <!-- Task Filters -->
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-semibold text-gray-800">Your Tasks</h2>
            <div class="flex space-x-2">
                <button id="filterAll" class="px-3 py-1 bg-indigo-600 text-white text-sm rounded-md">All</button>
                <button id="filterActive" class="px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded-md hover:bg-gray-300">Active</button>
                <button id="filterCompleted" class="px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded-md hover:bg-gray-300">Completed</button>
            </div>
        </div>

        <!-- Task List -->
        <div id="taskList" class="space-y-4">
            <!-- Tasks will be added here dynamically -->
            <div class="text-center py-10 text-gray-500" id="emptyState">
                <i class="fas fa-tasks text-4xl mb-3 text-gray-300"></i>
                <p>No tasks yet. Add your first task above!</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const taskForm = document.getElementById('taskForm');
            const taskTitle = document.getElementById('taskTitle');
            const taskDescription = document.getElementById('taskDescription');
            const taskCompleted = document.getElementById('taskCompleted');
            const taskList = document.getElementById('taskList');
            const emptyState = document.getElementById('emptyState');
            const submitBtn = document.getElementById('submitBtn');
            const cancelEdit = document.getElementById('cancelEdit');
            const filterAll = document.getElementById('filterAll');
            const filterActive = document.getElementById('filterActive');
            const filterCompleted = document.getElementById('filterCompleted');

            // State
            let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            let currentFilter = 'all';
            let editMode = false;
            let editId = null;

            // Initialize
            renderTasks();

            // Event Listeners
            taskForm.addEventListener('submit', handleSubmit);
            cancelEdit.addEventListener('click', cancelEditMode);
            filterAll.addEventListener('click', () => filterTasks('all'));
            filterActive.addEventListener('click', () => filterTasks('active'));
            filterCompleted.addEventListener('click', () => filterTasks('completed'));

            // Functions
            function handleSubmit(e) {
                e.preventDefault();
                
                const title = taskTitle.value.trim();
                const description = taskDescription.value.trim();
                const completed = taskCompleted.checked;

                if (!title) return;

                if (editMode) {
                    // Update existing task
                    tasks = tasks.map(task => 
                        task.id === editId ? { ...task, title, description, completed } : task
                    );
                    exitEditMode();
                } else {
                    // Add new task
                    const newTask = {
                        id: Date.now().toString(),
                        title,
                        description,
                        completed,
                        createdAt: new Date().toISOString()
                    };
                    tasks.unshift(newTask);
                }

                saveTasks();
                renderTasks();
                taskForm.reset();
            }

            function renderTasks() {
                if (tasks.length === 0) {
                    emptyState.classList.remove('hidden');
                    taskList.innerHTML = '';
                    return;
                }
                emptyState.classList.add('hidden');
                let filteredTasks = [...tasks];
                
                if (currentFilter === 'active') {
                    filteredTasks = tasks.filter(task => !task.completed);
                } else if (currentFilter === 'completed') {
                    filteredTasks = tasks.filter(task => task.completed);
                }

                taskList.innerHTML = filteredTasks.map(task => `
                    <div class="task-card bg-white rounded-lg shadow p-5 fade-in ${task.completed ? 'completed-task' : ''}" data-id="${task.id}">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="task-title font-medium text-lg ${task.completed ? 'text-green-500' : 'text-gray-800'}">${task.title}</h3>
                            <div class="flex space-x-2">
                                <button class="edit-btn p-1 text-indigo-500 hover:text-indigo-700">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-btn p-1 text-red-500 hover:text-red-700">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <p class="text-gray-600 mb-3">${task.description || 'No description'}</p>
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>${new Date(task.createdAt).toLocaleString()}</span>
                            <label class="inline-flex items-center">
                                <input type="checkbox" ${task.completed ? 'checked' : ''} 
                                    class="complete-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                                <span class="ml-2">Completed</span>
                            </label>
                        </div>
                    </div>
                `).join('');

                // Add event listeners to dynamically created elements
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', deleteTask);
                });

                document.querySelectorAll('.edit-btn').forEach(btn => {
                    btn.addEventListener('click', editTask);
                });

                document.querySelectorAll('.complete-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', toggleComplete);
                });
            }

            function deleteTask(e) {
                const taskElement = e.target.closest('.task-card');
                const taskId = taskElement.dataset.id;
                
                // Animation for deletion
                taskElement.style.transform = 'scale(0.9)';
                taskElement.style.opacity = '0';
                
                setTimeout(() => {
                    tasks = tasks.filter(task => task.id !== taskId);
                    saveTasks();
                    renderTasks();
                }, 300);
            }

            function editTask(e) {
                const taskElement = e.target.closest('.task-card');
                const taskId = taskElement.dataset.id;
                const task = tasks.find(task => task.id === taskId);
                
                // Fill form with task data
                taskTitle.value = task.title;
                taskDescription.value = task.description || '';
                taskCompleted.checked = task.completed;
                
                // Change to edit mode
                editMode = true;
                editId = taskId;
                submitBtn.textContent = 'Update Task';
                cancelEdit.classList.remove('hidden');
                
                // Scroll to form
                taskForm.scrollIntoView({ behavior: 'smooth' });
                taskTitle.focus();
            }

            function cancelEditMode() {
                editMode = false;
                editId = null;
                submitBtn.textContent = 'Add Task';
                cancelEdit.classList.add('hidden');
                taskForm.reset();
            }

            function exitEditMode() {
                editMode = false;
                editId = null;
                submitBtn.textContent = 'Add Task';
                cancelEdit.classList.add('hidden');
            }

            function toggleComplete(e) {
                const taskElement = e.target.closest('.task-card');
                const taskId = taskElement.dataset.id;
                
                tasks = tasks.map(task => 
                    task.id === taskId ? { ...task, completed: e.target.checked } : task
                );
                
                saveTasks();
                
                // Re-render if filtered
                if (currentFilter !== 'all') {
                    setTimeout(() => {
                        renderTasks();
                    }, 300);
                } else {
                    // Just update the class for animation
                    taskElement.classList.toggle('completed-task');
                    taskElement.querySelector('.task-title').classList.toggle('line-through');
                    taskElement.querySelector('.task-title').classList.toggle('text-green-500');
                }
            }

            function filterTasks(filter) {
                currentFilter = filter;
                
                // Update active filter button
                filterAll.classList.remove('bg-indigo-600', 'text-white');
                filterActive.classList.remove('bg-indigo-600', 'text-white');
                filterCompleted.classList.remove('bg-indigo-600', 'text-white');
                
                filterAll.classList.add('bg-gray-200', 'text-gray-700');
                filterActive.classList.add('bg-gray-200', 'text-gray-700');
                filterCompleted.classList.add('bg-gray-200', 'text-gray-700');
                
                if (filter === 'all') {
                    filterAll.classList.remove('bg-gray-200', 'text-gray-700');
                    filterAll.classList.add('bg-indigo-600', 'text-white');
                } else if (filter === 'active') {
                    filterActive.classList.remove('bg-gray-200', 'text-gray-700');
                    filterActive.classList.add('bg-indigo-600', 'text-white');
                } else if (filter === 'completed') {
                    filterCompleted.classList.remove('bg-gray-200', 'text-gray-700');
                    filterCompleted.classList.add('bg-indigo-600', 'text-white');
                }
                
                renderTasks();
            }

            function saveTasks() {
                localStorage.setItem('tasks', JSON.stringify(tasks));
            }
        });
    </script>
</body>
</html>